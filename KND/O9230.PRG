O9230 ( 外圆精磨 ) ;
( 判断程序调用方法 ) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[r1,r2,r3,r5,r6,r7,r8,r9,r11,r13,r17,r18,r19,r20] (与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
( 子程序局部变量赋值与程序使用变量 ) ;
#201 = #1  (工件外圆毛胚尺寸) ;
#202 = #2  (工件外圆图纸尺寸) ;
#203 = #3  (端面对刀点Z ) ;
#205 = #5  (精磨进给量) ;
#206 = #6  (精磨次数) ;
#207 = #7  (光磨次数) ;
#208 = #8  (精磨进给速度) ;
#209 = #9  (精磨Z轴移动速度) ;
#211 = #11 (功能选择) ;
#213 = #13 (外圆加工模式) ;
#217 = #17 (外径量仪功能) ;
#218 = #18 (Z轴磨削区间) ;
#219 = #19 (往复进刀方式) ;
#220 = #20 (到位停顿时间) ;
(变量赋值结束) ;
(功能选择 == 端面 GOTO光磨程序) ;
IF [ #211 == 3 ] GOTO 2000 ;
( 量仪 == 0 AND 进刀方式 = 单边 GOTO 普通往复单边进刀精磨 ) ;
IF [ [ #217 == 0 ] AND [ #219 == 0 ] ] GOTO 100 ;
( 量仪 == 0 AND 进刀方式 = 单边 GOTO 普通往复双边进刀精磨 ) ;
IF [ [ #217 == 0 ] AND [ #219 == 1 ] ] GOTO 200 ;
( 量仪 == 1 GOTO 量仪往复单边进刀精磨 ) ;
IF [ #217 == 1 ] GOTO 400 ;
GOTO 2000 ;
N100 ;
( 普通往复单边进刀精磨 ) ;
G65 P9231 A#201 B#202 C#203 J#205 K#206 E#208 F#209 R#218 T#220  ;
GOTO 2000 ;
N200 ;
( 普通往复双边进刀精磨 ) ;
G65 P9232 A#201 B#202 C#203 J#205 K#206 E#208 F#209 R#218 T#220 ;
GOTO 2000 ;
N300 ;
( 量仪往复单边进刀精磨 ) ;
G65 P9233 A#201 B#202 C#203 J#205 K#206 E#208 F#209 R#218 T#220 ;
GOTO 2000 ;
N2000 ;
M99 ;