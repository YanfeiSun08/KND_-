O9210 (端面磨削) ;
(判断程序调用方法) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[ r1,r2,r3,r4,r5,r8,r9,r11,r18,r20 ] (与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
(子程序局部变量赋值与程序使用变量) ;
#201 = #1  (工件外圆毛胚尺寸) ;
#202 = #2  (工件外圆图纸尺寸) ;
#203 = #3  (端面对刀点Z ) ;
#204 = #4  (粗磨进给量) ;
#205 = #5  (精磨进给量) ;
#208 = #8  (粗磨进给速度) ;
#209 = #9  (精磨进给速度) ;
#211 = #11 (功能选择) ;
#218 = #18 (Z轴磨削区间) ;
#220 = #20 (到位停顿时间) ;
(变量赋值结束) ;
G01 Z [ #203 - 2.0 ] F1000. (Z轴定位) ;
G01 X [ #201 + 2.0 ] F1000. (X轴定位) ;
#280 = #202 ;
IF [ #211 == 1 || #211 == 2 ] THEN #280 = #201  ;
G01 X#280 F100 (砂轮靠外径) ;
#281 = #203 ;
IF [ #211 == 1 || #211 == 3 ] THEN #281 = #203 - #204 -#205 ;
G01 Z#281 F100 ;
IF [ #211 == 2 ] GOTO 2000 ;
(端面磨削)
G01 W#204 F#208;
G04 X#220;
G01 W#205 F#209;
G04 X#220;
N2000 ;
M99 ;