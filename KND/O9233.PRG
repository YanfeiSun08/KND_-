O9233 ( 外圆精磨 ) ;
( 判断程序调用方法 ) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[r1,r2,r3,r5,r6,r8,r9,r18,r20] (与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
( 子程序局部变量赋值与程序使用变量 ) ;
#201 = #1  (工件外圆毛胚尺寸) ;
#202 = #2  (工件外圆图纸尺寸) ;
#203 = #3  (端面对刀点Z ) ;
#205 = #5  (精磨进给量) ;
#206 = #6  (精磨次数) ;
#208 = #8  (精磨进给速度) ;
#209 = #9  (精磨Z轴移动速度) ;
#218 = #18 (Z轴磨削区间) ;
#220 = #20 (到位停顿时间) ;
(变量赋值结束) ;
#285 = #203 (Z轴起点) ;
#286 = #203 + #218 (Z轴终点) ;
#1100 = 0 ;
#270 = 1 (精磨次数初始化) ;
WHILE [ [#1003 == 0] AND [#1100 == 0] ] DO 2 (精磨次数不等于零，运行循环2) ;
#280 = #280 - #206 * #270 (精磨X轴起点) ;
G31 X#280 F#511 P3 (X轴量仪进刀) ;
G31 X#280 F#512 P4 (X轴量仪进刀) ;
IF [ #1003 == 1 ] THEN #1100 = 1 ;
G01 Z#286 F#209 (Z轴移动到终点位置) ;
IF [ #285 == #286 ] GOTO 400 ;
G04 P#220  ;
N400 ;
G01 Z#285 F#209 (Z轴移动到起点位置) ;
#270 = #270 + 1 (精磨次数减一) ;
END 2 ;
#5541 = #5541 + #5041 - #202 (量仪补偿) ;
M55 ( 量仪退刀 );
M99 ;