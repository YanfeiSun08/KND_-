O9240 (外圆光磨) ;
(判断程序调用方法) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[r3,r7,r17,r18,r20,r21,r25,r26 ] ( 与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
(子程序局部变量赋值与程序使用变量) ;
#203 = #3  (端面对刀点Z ) ;
#207 = #7  (光磨次数) ;
#217 = #17 (外径量仪功能) ;
#218 = #18 (Z轴磨削区间) ;
#220 = #20 (到位停顿时间) ;
#221 = #21 (光磨Z轴移动速度) ;
#225 = #25 (Z轴退刀量) ;
#226 = #26 (X轴退刀位置) ;
(变量赋值结束) ;
#285 = #203 (Z轴起点) ;
#286 = #203 + #218 (Z轴终点) ;
#270 = #207 ;
WHILE [ #270 != 0 ] DO 3 (光磨次数不等于零，运行循环3) ;
G01 Z#286 F#221 (Z轴移动到终点位置) ;
(直切区间为零用量仪不用暂停) ;
IF [ [#218 == 0] AND [#217 ==1] ] GOTO 100 ;
G04 P#220 ;
N100 ;
G01 Z#285 F#221 (Z轴移动到起点位置) ;
(直切区间为零用量仪不用暂停) ;
IF [ #217 ==1 ] GOTO 200 ;
G04 P#220 ;
N200 ;
#270 = #270 - 1 (光磨次数减一) ;
END 3 ;
M99 ;