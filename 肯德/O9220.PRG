O9220 (外圆粗磨) ;
(判断程序调用方法) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[ r1,r2,r3,r4,r8,r9,r11,r13,r17,r18,r19,r20,r21,r23] (与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
(子程序局部变量赋值与程序使用变量) ;
#201 = #1  (工件外圆毛胚尺寸) ;
#202 = #2  (工件外圆图纸尺寸) ;
#203 = #3  (端面对刀点Z ) ;
#208 = #8  (粗磨进给速度) ;
#209 = #9  (粗磨Z轴移动速度)
#211 = #11 (功能选择) ;
#213 = #13 (外圆加工模式) ;
#217 = #17 (外径量仪功能) ;
#218 = #18 (Z轴磨削区间) ;
#219 = #19 (往复进刀方式) ;
#220 = #20 (到位停顿时间) ;
#221 = #21 (直切X轴抬刀量) ;
#223 = #23 (直切Z轴移动量) ;
(变量赋值结束) ;
G01 X#201 F100 (砂轮靠外径) ;
G01 Z#203 F100 ;
(功能选择 == 端面 GOTO光磨程序) ;
IF [ #211 == 3 ] GOTO 2000 ;
( 量仪 == 0 AND 磨削区间 == 0 GOTO 普通直切程序 ) ;
IF [ [ #217 == 0 ] AND [ #218 == 0 ] ] GOTO 100 ;
( 量仪 == 1 AND 磨削区间 == 0 GOTO 量仪直切程序 ) ;
IF [ [ #217 == 1 ] AND [ #218 == 0 ] ] GOTO 400 ;
( 量仪 == 0 AND 模式 == 0 GOTO 普通直切程序 ) ;
IF [ [ #217 == 0 ] AND [ #213 == 0 ] ] GOTO 100 ;
( 量仪 == 0 AND 模式 == 1 AND 进刀方式 = 单边 GOTO 普通往复单边进刀程序 ) ;
IF [ [ #217 == 0 ] AND [ #213 == 1 ] AND [ #219 == 0 ] ] GOTO 200 ;
( 量仪 == 0 AND 模式 == 1 AND 进刀方式 = 双边 GOTO 普通往复双边进刀程序 ) ;
IF [ [ #217 == 0 ] AND [ #213 == 1 ] AND [ #219 == 1 ] ] GOTO 300 ;
( 量仪 == 1 AND 模式 == 0 GOTO 量仪直切程序 ) ;
IF [ [ #217 == 1 ] AND [ #213 == 0 ] ] GOTO 400 ;
( 量仪 == 1 AND 模式 == 1 GOTO 量仪往复单边进刀程序量仪往复只能单边进刀 ) ;
IF [ [ #217 == 1 ] AND [ #213 == 1 ] ] GOTO 500 ;
GOTO 2000 ;
N100 ;
(普通直切粗磨) ;
G65 P9221 A#201 B#202 C#203 E#208 F#209 R#218 T#220 U#221 W#223 ;
GOTO 2000 ;
N200 ;
(普通往复单边进刀粗磨) ;
G65 P9222 A#201 B#202 C#203 E#208 F#209 R#218 T#220 ;
GOTO 2000 ;
N300 ;
(普通往复双边进刀粗磨) ;
G65 P9223 A#201 B#202 C#203 E#208 F#209 R#218 T#220 ;
GOTO 2000 ;
N400 ;
(量仪直切粗磨) ;
G65 P9224 A#201 B#202 C#203 E#208 F#209 R#218 T#220 U#221 W#223 ;
GOTO 2000 ;
N500 ;
(量仪往复单边进刀程序) ;
G65 P9225 A#201 B#202 C#203 E#208 F#209 R#218 T#220 ;
GOTO 2000 ;
N2000 ;
M99 ;