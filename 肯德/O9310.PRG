O9031 (直角休整) ;
PARAMS[r1,r2,r3,r4,r5,r6,r7,r8] ;
#201 = #[[INT]#1] (砂轮底面对刀位置X) ;
#202 = #[[INT]#2] (砂轮侧面对刀位置Z) ;
#203 = #3(底面每次休整量) ;
#204 = #4(侧面每次休整量) ;
#205 = - #5(砂轮底面宽度) ;
#206 = #6(砂轮侧面宽度) ;
#207 = #7(休整次数) ;
#208 = #8(休整进给速度) ;
M05 ;
#5561 = #201 ;
#5562 = #202 ;
G56 ;
M08 ;
G01 X10.0 F1000 (X轴定位) ;
G01 Z#205 F1000 (z轴到底面起点) ;
#270 = #207 ;
WHILE [ #270 > 0 ] DO1 ;
#[[INT]#1] =#[[INT]#1] - #203(修改变量修砂轮X对刀点) ;
#[[INT]#2] =#[[INT]#2] + #204(修改变量修砂轮X对刀点) ;
#5561 = #5561 - #203 (修改修砂轮X对刀点) ;
#5562 = #5562 + #204 (修改修砂轮Z对刀点) ;
#5541 = #5541 - #203 (修改工件X对刀点) ;
#5542 = #5542 + #204 (修改工件Z对刀点) ;
G01 X5.0 F1000 (X轴定位) ;
G01 Z[#205] F1000 (修砂轮Z起点) ;
G01 X0 F#208 ;
G01 Z0 F#208 ;
G01 X-#206 F#208 ;
G01 Z5.0 F#208 ;
#270 = #270 -1 ;
END 1 ;
G01 X3.0 F1000 ;
G01 Z[#205] F1000 (修砂轮Z起点) ;
G01 X0 F#208 ;
G01 Z0 F#208 ;
G01 X-#206 F#208 ;
G01 Z-5.0 F#208 ;
G01 X10.0 F1000 ;
M99 ;
