O9221 (外圆普通直切粗磨) ;
(判断程序调用方法) ;
IF [ ! ISNULL[#16] ] GOTO 10 ( G65调用 ) ;
PARAMS[ r1,r2,r3,r4,r8,r9,r18,r20,r21,r23] (与主程序CALL配对使用) ;
N10 (判断程序调用结束) ;
(子程序局部变量赋值与程序使用变量) ;
#201 = #1  (工件外圆毛胚尺寸) ;
#202 = #2  (工件外圆图纸尺寸) ;
#203 = #3  (端面对刀点Z ) ;
#208 = #8  (粗磨进给速度) ;
#209 = #9  (粗磨Z轴移动速度)
#218 = #18 (Z轴磨削区间) ;
#220 = #20 (到位停顿时间) ;
#221 = #21 (直切X轴抬刀量) ;
#223 = #23 (直切Z轴移动量) ;
(变量赋值结束) ;
(Z轴方向) ;
#272 = 1.0 ;
IF [ #218 < 0 ] THEN #272 = -1.0 ;
#285 = #203 (Z轴起点) ;
#286 = #203 + #218 (Z轴终点) ;
#280 = #202 (粗磨到位点) ;
#271 = FUP [ FABS [#218]/#223 ] (分刀次数) ;
IF [ #223 <= 0 ] THEN ERR[ 1 , " 直切Z轴移动量小于等于零 "] ;
#270 = 0 ;
WHILE [ #270 <= #271 ] DO 1 (直切次数，运行循环1) ;
#287 = #203 + #223 * #270 * #272 (Z轴中间点) ;
IF [ [#287 > #286 ] AND [ #218 > 0 ] ] THEN #287 = #286 ;
IF [ [#287 < #286 ] AND [ #218 < 0 ] ] THEN #287 = #286 ;
G01 Z#287 F#209 (Z轴定位) ;
G01 X#280 F#208 (X轴进刀) ;
G04 P#220 ;
IF [ #270 == #271 ] GOTO 100 ;
G01 X[#201+#221] F100 (X轴抬刀) ;
N100 ;
#270 = #270 + 1 (次数加一) ;
END 1 ;
G01 Z#285 F#209 ;
G01 X#280 F#208 ;
N2000 ;
M99 ;